\chapter{总结与展望}
%本章是毕业论文的总结，是整篇论文的归宿，应精炼、准确、完整。应着重阐述自己的创造性成果及其在本研究领域中的意义、作用，还可进一步提出需要讨论的问题和建议。
%卷积神经网络可视化
\section{工作总结}
%近些年来，随着计算机技术的蓬勃发展及其在医学影像领域的广泛应用，疾病标记物定位方法也不断取得进步。由于医学图像的标注代价高昂、难以大量获得，故在弱监督条件（提供图像级标签，需要给出像素级定位结果）下实现疾病标记物的定位就具有较大的研究价值和实际意义。针对弱监督条件下的疾病标记物定位问题，目前主要有包括多示例学习和卷积神经网络可视化在内的两种计算机方法可解决疾病标记物定位这一问题。但是在面对分布广泛、尺寸大小不一的疾病标记物时，以上方法均只能定位到疾病标记物的大概位置，同时还会伴随着将正常区域也误认为疾病标记物和遗漏疾病标记物的的情况发生，无法在弱监督条件下实现疾病标记物的精确定位。为了克服以上方法的缺陷，在弱监督条件下实现疾病标记物的精确定位，本文从图像生成的角度，创造性地组合了CNN分类器和判别器，提出了一种新型网络结构。随后在三个数据集上均进行了相关性能的测试，分别处理了二类问题和多类问题，并与当前流行的卷积神经网络可视化方法做了详尽的比较。从定性分析（热图）和定量分析（P-R曲线及其AUC）两个角度来看，本文提出的方法均取得了目前最佳的性能表现，在保证定位疾病标记物的精确性的同时还能兼顾其全面性（不会遗漏难以察觉的微小疾病标记物）。本文的工作总结如下：

在弱监督条件（提供图像级标签，需要给出像素级结果）下，面对分布广泛、尺寸大小不一的疾病标记物定位任务，本文从图像生成的角度，创造性地组合了CNN分类器和判别器，提出了一种新型网络结构。随后在三个数据集上均进行了相关性能的测试，分别处理了二类问题和多类问题，并与当前流行的卷积神经网络可视化方法做了详尽的比较。从定性分析（热图）和定量分析（P-R曲线及其AUC）两个角度来看，本文提出的方法均取得了目前最佳的性能表现，在保证定位疾病标记物的精确性的同时还能兼顾其全面性（不会遗漏难以察觉的微小疾病标记物）。本文的工作总结如下：

1）本文极具创造性地组合了CNN分类器和生成生成网络，提出了一种较为新颖的网络模型，CNN分类器负责定位生物疾病标记物并尽量去除疾病标记物，生成对抗网络负责进一步完全去除疾病标记物，并采用CNN分类器和生成对抗网络交替训练的方式来实现以上设想。面对在图像中分布广泛、尺寸大小不一的疾病标记物，无论是多示例学习还是卷积神经网络可视化方法，都只能大概定位到疾病标记物的位置，往往还会忽略图像中难以察觉的疾病标记物，这主要是多示例学习中需要对图像的分块取样操作和卷积神经网络可视化方法中对特征图的上采样操作造成的。为了克服以上问题，本文从图像生成的角度出发，避免对图像的分块操作和上采样操作，通过生成图像减去输入图像来给出疾病标记物的准确位置。另外，由于图像中的疾病标记物所占比例极小，故使用L1损失函数来加以约束，从而尽量保证正常像素的像素强度保持不变。

2）我们首先将本文提出的方法用于处理二类疾病标记物定位问题，相比于神经网络可视化方法，无论是从定性分析还是从定量分析的角度，本文提出的方法的表现更为出色。与此同时，我们还将本文提出的方法用于处理多类疾病标记物定位问题，在此过程中，由于天然的数据不均衡现象存在和生成对抗网络自身的限制，我们对数据加载和损失函数均做出了相关改进。首先，我们将二类交叉熵换成了多类交叉熵损失函数并将CNN分类器输出端扩展到了多个。另外，我们还将所有异常类看做生成对抗网络的假图像输入，这样既避免了额外的网络引入，又能最大限度减少额外的计算资源开销。通过以上系列微调，我们成功将本文提出的方法应用到了多类疾病标记物定位任务中，与卷积神经网络可视化方法相比，文本提出的方法同样取得了目前最佳的性能表现，从而证明了本文提出的方法的应用广泛性和鲁棒性。

%在只提供图像级标注，要求给出像素级定位结果的弱监督条件下，目前是没有深度学习方法能直接较好地精确定位疾病标记物。因此，本文提出的新颖深度学习模型填补了这个问题的空白。
定位疾病标记物不仅为发现更多潜在疾病标记物提供了技术基础，还能辅助专业医师诊断疾病，这有利于缓解专业医师繁重的工作。同时，由于本文提出的方法只需要提供图像级标注，这能够大大降低图像的标注成本。

\section{研究展望}
虽然本文提出的方法能，无论是在二类疾病标记物定位任务还是在多类疾病标记物定位任务上，都能取得比较好的性能。但是本文提出的方法还存在以下不足：

% gan训练
1）众所周知，训练生成对抗网络的训练过程存在震荡现象，而由编码器-解码器与判别器组成的生成对抗网络是本文提出的模型的重要组成部分，虽然WGAN-GP（本文采用的生成对抗网络）在理论上证明添加梯度惩罚可以避免梯度消失与梯度爆炸，但是当实验参数设置不当时，仍然会发生梯度更新过猛的现象，具体表现在随着训练过程的进行，判别器输出分数的绝对值不断增大，最终导致训练失败。

% 图片size大小
2）本文所有实验的输入图像尺寸大小均为$128\times 128$，这主要是考虑到由于眼底图像含有大量丰富的细节，图片尺寸过大不仅会增加编码器-解码器的模型复杂度（主要是网络深度），还会增加编码器-解码器重建图片的难度。但是实际上原始眼底图像的尺寸大小大于$1000\times 1000$，就会导致原始图像中的部分细节纹理信息的丢失。

本文提出的方法除了存在以上不足外，本文提出的方法在处理疾病的多样性方面还能从以下思路进行下一步扩展与延伸：

1）无论是二类糖尿病病变数据集，还是二类/多类模拟皮肤数据集，其中疾病标记物的共同特点是分布广泛、尺寸大小不一。除此之外，异常区域的像素总量在整张图像中只占了极少一部分（$\le 5\%$），这也是在本文损失函数中加入L1约束的主要原因。所以本文接下来的研究内容可以针对异常区域占比较大的疾病，比如黑色素瘤病变。对于此类异常区域占比比较大的图像，L1约束显然不再适用。因此还需要对损失函数进行相关改进，其中比较好的方案是根据图像中被修改的像素数量也设置惩罚，一旦被修改的像素数量超过某个阈值，则施加惩罚。否则，损失惩罚为$0$。

2）在本文使用到的数据集中，无论是二类数据集还是多类数据集，总体而言，各个类别之间只是存在轻微数据不均衡，各个类别之间的图像数量之比比较接近$1:1$。而在临床情况下，很多疾病是非常少见的，比如斑色鱼鳞癣、大疱性表皮松解症等极其罕见的皮肤病。如果能在图像中准确定位到这类罕见疾病的疾病标记物，这将有重要实际意义和临床意义。不过这种情况下在图像中定位到疾病标记物，除了要面对样本不均衡问题外，很有可能还需要解决小样本问题。

3）本文提出的方法处理的图像均是与皮肤图像镜或者眼底图像相关，这些图像中的疾病标记物与背景相比均是存在颜色、亮度、纹理等直观视觉特征上的区别。与以上图像不同的是，CT图像中的疾病标记物相对没有那么明显，区分度较小，比如在影像学上，CT肺部影像中实性结节和混合性结节比较容易发生混淆。因此，相比较而言CT影像中的病灶区域更加难以检测更不用说定位。但是，医院每天将会产生大量CT等影像，如果能将在这种影像中完成对疾病疾病标记物的定位，那么将会大大减轻专业医师的工作负担，产生较大的实际应用价值。

%总而言之，本文提出的模型的诸多地方都有待挖掘和改进。同时，本文的研究内容也有很多方向可以进行下一步扩展。
